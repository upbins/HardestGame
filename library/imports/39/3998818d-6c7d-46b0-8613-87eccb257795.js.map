{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\resources\\scripts/assets\\resources\\scripts\\game.js"],"names":["CacheObjects","require","CreatorHelper","UnitTools","cc","Class","extends","Component","properties","LevelsPrefab","default","type","Prefab","BulletPrefab","BingoBulletPrefab","FinalBulletPrefab","FailAlertPrefab","LimitNumPrefab","StartTipsPrefab","SuccessAlertPrefab","TimeLablePrefab","TopAd","Node","BottomAd","ShootLabel","StartLayout","StartButton","Button","TryButton","BulletAudio","AudioClip","TimeAudio","BingoAudio","BgAudio","SuccessAudio","FailAudio","start","RightButtonOn","systemEvent","on","SystemEvent","EventType","KEY_DOWN","OnKeyBackUp","StartGame","log","active","IsTryGame","InitConfig","TryGame","onDestroy","off","node","MOUSE_DOWN","onMouseDown","MOUSE_UP","onMouseUp","event","keyCode","getComponent","Label","string","sys","os","OS_ANDROID","macro","back","director","end","a","mouseType","getButton","MouseLabel","LevelArray","LevelInfo","GameObject","GameStart","InitLevelUi","level","length","removeAllChildren","BgCurrentAudio","audioEngine","play","IsSendBullet","IsCanTap","IsInit","timer","unschedule","LevelPrefab","LevelUi","instantiate","ChangeUpdateTime","ChangeTime","DirTime","undefined","SpeedTime","UpdateTime","QuickTime","Dir","QuickStandTime","circle","find","WaterNode","Opacity","time_bg","limit_bg","LimitNum","TimeLabel","bulletNode","x","y","addChild","OffsetAngle","RoteSpeed","TempOffsetAngle","LimitTime","Time","Waitnum","TagetNum","IsReturn","ChangeSpeed","TrunAngle","CurLimitNum","UpdateLimitNum","Bullet","CreateBullet","StartTips","StartAnimationCom","Animation","AnimationEnd","isPause","isOver","UpdateTimer","bind","time","TimeCurrentAudio","GameOver","schedule","num","Name","RealPath","getRealPath","Sp","Sprite","changeSpriteFrameWithServerUrl","GameContinue","CheckCollision","stop","BulletCurrentAudio","WaterAction","BingoBullet","CreateBingoBullet","FadeAction1","fadeTo","FadeAction2","runAction","sequence","BingoCurrentAudio","action","blink","Math","PI","b","PosX","sin","PosY","cos","rotation","ChangeTopAndBottomAdSpriteFrame","TopUrl","BottomUrl","sp","changeSpriteFrameWithServerUrlForWeb","IsPause","IsOver","TapHandle","GamePause","self","IsSuccess","SuccessCurrentAudio","SuccessAlert","NextBtn","setNodeClickEvent","ShowOver","FailAudioCurrentAudio","FailAlert","ResetBtn","isCanTap","DelayAction","delayTime","CallFunc","callFunc","MoveAction","moveTo","p","easing","easeSineOut","ChangeRandomDir","random","update","dt"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\resources\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar CacheObjects = require('global')\r\nvar CreatorHelper = require(\"CreatorHelper\")\r\nvar UnitTools = require(\"UnitTools\")\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        LevelsPrefab: {\r\n            default: [],\r\n            type: cc.Prefab\r\n        }, //关卡表现Prefab\r\n        BulletPrefab: cc.Prefab,\r\n        BingoBulletPrefab: cc.Prefab,\r\n        FinalBulletPrefab:cc.Prefab,\r\n        FailAlertPrefab: cc.Prefab,\r\n        LimitNumPrefab: cc.Prefab,\r\n        StartTipsPrefab: cc.Prefab,\r\n        SuccessAlertPrefab: cc.Prefab,\r\n        TimeLablePrefab:cc.Prefab,\r\n        TopAd:cc.Node,\r\n        BottomAd:cc.Node,\r\n        ShootLabel:cc.Node,\r\n        StartLayout:cc.Node,\r\n        StartButton:cc.Button,\r\n        TryButton:cc.Button,\r\n        BulletAudio: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n      \r\n        TimeAudio:{\r\n            default:null,\r\n            type:cc.AudioClip\r\n        },\r\n        BingoAudio:{\r\n            default:null,\r\n            type:cc.AudioClip\r\n        },\r\n        BgAudio:{\r\n            default:null,\r\n            type:cc.AudioClip\r\n        },\r\n        SuccessAudio:{\r\n            default:null,\r\n            type:cc.AudioClip\r\n        },\r\n        FailAudio:{\r\n            default:null,\r\n            type:cc.AudioClip\r\n        },\r\n     \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {\r\n        \r\n    // },\r\n    start() {\r\n \r\n        this.RightButtonOn = false\r\n        // cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onMouseDown,this); // onLoad 在ＵＩ线程监听　　而callback在事件线程调用　　　第三个参数为线程传参\r\n        // cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onMouseUp,this);\r\n        // this.node.on(cc.Node.EventType.MOUSE_DOWN, this.onMouseDown, this.node);\r\n        // this.node.on(cc.Node.EventType.MOUSE_UP, this.onMouseUp, this.node);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.OnKeyBackUp, this);\r\n        // CreatorHelper.setNodeClickEvent(this.ShootLabel, function () {\r\n        //     cc.director.end()\r\n        // })\r\n        // CreatorHelper.setNodeClickEvent(this.StartButton, function () {\r\n        //     CacheObjects.IsTryGame = false\r\n        //     this.InitConfig();\r\n        // })\r\n        // CreatorHelper.setNodeClickEvent(this.TryButton, function () {\r\n        //     CacheObjects.IsTryGame = true\r\n        //     this.InitConfig();\r\n        // })\r\n        \r\n    },\r\n    StartGame(){\r\n        cc.log(\"========>\")\r\n        this.StartLayout.active = false\r\n        CacheObjects.IsTryGame = false\r\n        this.InitConfig();\r\n    },\r\n    TryGame(){\r\n        this.StartLayout.active = false\r\n        CacheObjects.IsTryGame = true\r\n        this.InitConfig();\r\n    },\r\n    onDestroy () {\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.OnKeyBackUp, this);\r\n        this.node.off(cc.Node.EventType.MOUSE_DOWN, this.onMouseDown, this);\r\n        this.node.off(cc.Node.EventType.MOUSE_UP, this.onMouseUp, this);\r\n    },\r\n    OnKeyBackUp:function(event){\r\n        cc.log(\"=============================>\",event.keyCode)\r\n        this.ShootLabel.getComponent(cc.Label).string  = event.keyCode\r\n        if(cc.sys.os == cc.sys.OS_ANDROID){ \r\n            switch(event.keyCode) {\r\n                case cc.macro.keyCode.back:\r\n                    cc.director.end()\r\n                    break;\r\n                case cc.macro.keyCode.a:\r\n                    cc.director.end()\r\n                    break;\r\n            }\r\n        }\r\n    },\r\n    onMouseDown: function(event) {\r\n        var mouseType = event.getButton();\r\n        cc.log(\"==========================>onMouseDown\",mouseType)\r\n        this.MouseLabel.getComponent(cc.Label).string  = mouseType\r\n        if (mouseType === 1) {\r\n            this.RightButtonOn = true\r\n        }\r\n    },\r\n    onMouseUp: function(event) {\r\n        var mouseType = event.getButton();\r\n        cc.log(\"==========================>onMouseUp\",mouseType)\r\n        this.MouseLabel.getComponent(cc.Label).string  = mouseType\r\n        if (mouseType === 1) {\r\n            // 鼠标右键释放\r\n            cc.director.end()\r\n        }\r\n    },\r\n    // //初始化相关关卡数据\r\n    InitConfig() {\r\n        this.LevelArray = CacheObjects.LevelInfo\r\n        CacheObjects.GameObject = this;\r\n        this.UnitTools = new UnitTools()\r\n        \r\n        this.GameStart()\r\n        // this.node.schedule(function () {\r\n            \r\n        // },1)\r\n        // this.UpdateTimer = function () {\r\n        //     cc.log(\"===>定时器11111\")\r\n        // }.bind(this)\r\n        // this.schedule(this.UpdateTimer,1)\r\n    },\r\n    InitLevelUi(level) {\r\n        if (level > this.length) {\r\n            cc.log(\"全部通关啦\")\r\n            return\r\n        }\r\n        if (this.node){\r\n            this.node.removeAllChildren(true);\r\n        }\r\n        this.BgCurrentAudio = cc.audioEngine.play(this.BgAudio, true, 0.2);\r\n        this.IsSendBullet = false;\r\n        this.IsCanTap = false;\r\n        this.IsInit = false;\r\n    \r\n        if (this.timer) {\r\n            this.unschedule(this.timer)\r\n        }\r\n        this.level = level;\r\n        var level = level - 1;\r\n        var LevelArray = this.LevelArray[level]\r\n        var LevelPrefab = this.LevelsPrefab[level]\r\n        var LevelUi = cc.instantiate(LevelPrefab);\r\n        this.ChangeUpdateTime = LevelArray.ChangeTime //UnitTools.random(100,300) //经过多少转向\r\n        this.DirTime = undefined //突然转向\r\n        this.SpeedTime = undefined  //突然变速时间\r\n        this.UpdateTime = 0;//用于基于突然转向\r\n        this.QuickTime = 0;//减速之后多久变灰正常\r\n        this.Dir = 1\r\n        this.QuickStandTime = undefined\r\n        this.circle = cc.find(\"circle\", LevelUi); \r\n        this.WaterNode = cc.find(\"WaterNode\",LevelUi);\r\n        this.WaterNode.Opacity = 0;\r\n        this.WaterNode.active = false;\r\n        this.time_bg = cc.find(\"time_bg\", LevelUi);\r\n        this.limit_bg = cc.find(\"limit_bg\",LevelUi);\r\n        this.LimitNum = cc.instantiate(this.LimitNumPrefab)\r\n        this.TimeLabel = cc.instantiate(this.TimeLablePrefab)\r\n        this.bulletNode =  cc.find(\"bulletNode\",LevelUi);\r\n        this.TimeLabel.x = -357\r\n        this.TimeLabel.y = 455\r\n        if (LevelUi) {\r\n            this.LevelUi = LevelUi\r\n            this.node.addChild(LevelUi);\r\n        }\r\n        LevelUi.addChild(this.TimeLabel)\r\n        LevelUi.addChild(this.LimitNum)\r\n        this.OffsetAngle = LevelArray.RoteSpeed\r\n        this.TempOffsetAngle = LevelArray.RoteSpeed\r\n        this.LimitTime = LevelArray.Time\r\n        this.Waitnum = LevelArray.TagetNum\r\n        this.IsReturn = LevelArray.IsReturn\r\n        this.ChangeSpeed = LevelArray.ChangeSpeed\r\n        this.TrunAngle = 0\r\n        this.CurLimitNum = 0\r\n        this.UpdateLimitNum(0)\r\n        this.Bullet = this.CreateBullet()\r\n        this.StartTips = cc.instantiate(this.StartTipsPrefab);\r\n        this.node.addChild(this.StartTips,99)\r\n        var StartAnimationCom = this.StartTips.getComponent(cc.Animation)\r\n        StartAnimationCom.AnimationEnd = function (){\r\n            this.StartTips.active = false\r\n            this.IsCanTap = true;\r\n            this.IsInit = true;\r\n            this.isPause = false;\r\n            this.isOver = false;\r\n            this.UpdateTimer(this.LimitTime)\r\n        }.bind(this)\r\n    },\r\n    //更新倒计时的\r\n    UpdateTimer(time){\r\n        if (this.timer) {\r\n            this.unschedule(this.timer)\r\n        }\r\n        //超时tick\r\n        this.TimeLabel.getComponent(cc.Label).string = time;\r\n        this.timer = function () {\r\n            time -= 1;\r\n            this.TimeLabel.getComponent(cc.Label).string = time;\r\n            if (time <= 0){\r\n                if (this.timer) {\r\n                    this.unschedule(this.timer)\r\n                }\r\n                this.TimeCurrentAudio = cc.audioEngine.play(this.TimeAudio, false, 1);\r\n                this.GameOver()\r\n            }\r\n        }.bind(this);\r\n        this.schedule(this.timer, 1);\r\n    },\r\n    //更新当前插中数字的\r\n    UpdateLimitNum(num){\r\n    \r\n        if (this.LimitNum)\r\n        {\r\n            var Name = \"resources/limit_num/\"+num+\".png\"\r\n            var RealPath = CreatorHelper.getRealPath(Name)\r\n            var Sp = this.LimitNum.getComponent(cc.Sprite)\r\n            CreatorHelper.changeSpriteFrameWithServerUrl(Sp, RealPath)\r\n        }\r\n        if (num >= this.Waitnum){\r\n            this.GameContinue()\r\n            return\r\n        }\r\n    },\r\n    //创建子弹\r\n    CreateBullet() {\r\n        var Bullet = cc.instantiate(this.BulletPrefab)\r\n        this.node.addChild(Bullet);\r\n        return Bullet\r\n    },\r\n    //检测碰撞跟随转\r\n    CheckCollision(){\r\n        cc.audioEngine.stop(this.BulletCurrentAudio);\r\n        this.CurLimitNum += 1;\r\n        this.IsCanTap = true;\r\n        this.WaterAction();\r\n        this.UpdateLimitNum(this.CurLimitNum)\r\n        this.Bullet.active = false;\r\n        this.BingoBullet = this.CreateBingoBullet()\r\n        if (!this.isOver){\r\n            this.Bullet = this.CreateBullet()\r\n        }\r\n\r\n    },\r\n    //雨滴运动\r\n    WaterAction(){\r\n        this.WaterNode.active = true\r\n        var FadeAction1 = cc.fadeTo(0.1, 255)\r\n        var FadeAction2 = cc.fadeTo(0.1, 0)\r\n        this.WaterNode.runAction(cc.sequence(FadeAction1,FadeAction2));\r\n    },\r\n    //创建打中的子弹\r\n    CreateBingoBullet() {\r\n        this.BingoCurrentAudio = cc.audioEngine.play(this.BingoAudio, false, 1);\r\n        var BingoBullet = undefined\r\n        cc.log(\"====\",this.isOver)\r\n         if (!this.isOver) {\r\n            BingoBullet = cc.instantiate(this.BingoBulletPrefab)\r\n         }else{\r\n            BingoBullet = cc.instantiate(this.FinalBulletPrefab)\r\n            var action = cc.blink(0.5,3);\r\n            BingoBullet.runAction(action)\r\n         }\r\n         if (BingoBullet!=undefined){\r\n             this.bulletNode.addChild(BingoBullet, 1);\r\n             var a = (180 - this.TrunAngle) * Math.PI / 180 //cc.degreesToRadians(180-this.TrunAngle)\r\n             var b = (180 - this.TrunAngle) * Math.PI / 180\r\n             var PosX = Math.sin(a) * 140;\r\n             var PosY = Math.cos(b) * 140;\r\n             BingoBullet.x = PosX;\r\n             BingoBullet.y = PosY;\r\n             BingoBullet.rotation = 360 - this.TrunAngle\r\n             return BingoBullet\r\n         }\r\n    },\r\n    //上下边栏的图片置换\r\n    ChangeTopAndBottomAdSpriteFrame(TopUrl,BottomUrl){\r\n        var TopUrl = \"http://i4.fuimg.com/583278/00e2ef22ec67b9b0.jpg\"\r\n        var BottomUrl = \"http://i4.fuimg.com/583278/00e2ef22ec67b9b0.jpg\"\r\n        \r\n        //CreatorHelper.changeSpriteFrameWithServerUrlForWeb(this.TopAd.getComponent(cc.Sprite), TopUrl)\r\n        var sp = this.TopAd.getComponent(cc.Sprite)\r\n        CreatorHelper.changeSpriteFrameWithServerUrlForWeb(sp,TopUrl)\r\n        sp = this.BottomAd.getComponent(cc.Sprite)\r\n        CreatorHelper.changeSpriteFrameWithServerUrlForWeb(sp, BottomUrl)\r\n    },\r\n    //游戏开始\r\n    GameStart() {\r\n        this.level = 1; //游戏当前关卡\r\n        this.IsPause = false; //游戏当前事发后处于暂停状态,可通过gamePause方法暂停\r\n        this.length = this.LevelsPrefab.length;\r\n        this.IsCanTap = true;\r\n        this.IsOver = false;\r\n        this.IsInit = false;\r\n        this.IsTryGame = false;//是否试玩\r\n        // //测试网上下载图片\r\n        // this.ChangeTopAndBottomAdSpriteFrame()\r\n        this.TapHandle()//设置触摸\r\n        this.InitLevelUi(this.level);\r\n    },\r\n    GamePause() {\r\n        this.IsCanTap = false;\r\n        this.IsPause = true;\r\n    },\r\n    GameContinue() {\r\n        var self = this;\r\n        if (!self.isOver) {\r\n            self.IsPause = true;\r\n            self.IsCanTap = false;\r\n            self.IsInit = false\r\n            this.IsSuccess = true\r\n            cc.audioEngine.stop(self.BgCurrentAudio)\r\n            self.SuccessCurrentAudio = cc.audioEngine.play(self.SuccessAudio, false, 1);\r\n            if (self.SuccessAlert){\r\n                self.SuccessAlert.removeAllChildren(true);\r\n            }\r\n            self.SuccessAlert = cc.instantiate(self.SuccessAlertPrefab)\r\n            self.node.addChild(self.SuccessAlert);\r\n            self.SuccessAlert.active = true\r\n            self.NextBtn = cc.find(\"next_btn\", self.SuccessAlert)\r\n            if (this.timer) {\r\n                this.unschedule(this.timer)\r\n            }\r\n            CreatorHelper.setNodeClickEvent(self.NextBtn, function () {\r\n                self.IsSuccess = false\r\n                cc.audioEngine.stop(self.SuccessCurrentAudio)\r\n                if (CacheObjects.IsTryGame == true){\r\n                    self.StartLayout.active = true\r\n                }else{\r\n                    self.level += 1;\r\n                    self.InitLevelUi(self.level)\r\n                }\r\n               \r\n              })\r\n        }\r\n    },\r\n    ShowOver(){\r\n        if (!this.IsSuccess) {\r\n            var self = this;\r\n            cc.audioEngine.stop(self.BgCurrentAudio)\r\n            self.FailAudioCurrentAudio = cc.audioEngine.play(self.FailAudio, false, 1);\r\n            self.FailAlert = cc.instantiate(self.FailAlertPrefab)\r\n            self.node.addChild(self.FailAlert);\r\n            self.FailAlert.active = true\r\n            self.ResetBtn = cc.find(\"next_btn\", self.FailAlert)\r\n            CreatorHelper.setNodeClickEvent(self.ResetBtn, function () {\r\n                self.FailAlert.active = false\r\n                \r\n                cc.audioEngine.stop(self.FailAudioCurrentAudio)\r\n                self.StartLayout.active = true\r\n                //self.InitLevelUi(1)\r\n            })\r\n        }\r\n    },\r\n    GameOver() {\r\n        var self = this;\r\n        self.isOver = true;\r\n        self.isCanTap = false;\r\n\r\n        if (self.FailAlert){\r\n            self.FailAlert.removeAllChildren(true);\r\n        }\r\n        if (this.timer) {\r\n            this.unschedule(this.timer)\r\n        }\r\n        if (!this.IsSuccess) {\r\n            this.Bullet.active = true\r\n            var DelayAction = cc.delayTime(0.8);\r\n            var CallFunc = cc.callFunc(this.ShowOver, this)\r\n            self.node.runAction(cc.sequence(DelayAction,CallFunc))\r\n        }\r\n    },\r\n    TapHandle(){\r\n        var self = this\r\n        if (self.node) {\r\n            CreatorHelper.setNodeClickEvent(self.node, function () {\r\n                if (self.IsCanTap) {\r\n                    if (!self.isOver) {\r\n                        if (self.IsInit){\r\n                            if (!self.RightButtonOn){\r\n                                self.Bullet.active = true\r\n                                var MoveAction = cc.moveTo(0.5,cc.p(self.bulletNode.x,self.bulletNode.y)).easing(cc.easeSineOut()); \r\n                                self.Bullet.runAction(MoveAction)\r\n                                cc.audioEngine.stop(self.BingoCurrentAudio);\r\n                                self.BulletCurrentAudio = cc.audioEngine.play(self.BulletAudio, false, 1);\r\n                            }\r\n                        }\r\n                    }\r\n                \r\n                }\r\n            })\r\n        }\r\n    },\r\n    //旋转的过程中的一些特殊操作\r\n    ChangeRandomDir(){\r\n        //翻转\r\n        if (this.IsReturn) {\r\n            if (this.DirTime == undefined){\r\n\r\n                this.DirTime = this.ChangeUpdateTime + this.UnitTools.random(200,300)\r\n            }\r\n            this.UpdateTime+=1\r\n            if (this.UpdateTime >= this.DirTime ) {\r\n                if (this.Dir == 1){  //证明现在是顺时针\r\n                    this.OffsetAngle -= this.ChangeSpeed\r\n                    if (this.OffsetAngle <= 0) {\r\n                        this.Dir = 2\r\n                        this.OffsetAngle = -this.TempOffsetAngle\r\n                        this.DirTime = undefined\r\n                        this.UpdateTime = 0\r\n                    }\r\n                }\r\n                else if(this.Dir == 2)\r\n                {    \r\n                    this.OffsetAngle += this.ChangeSpeed\r\n                    if (this.OffsetAngle >= 0) {\r\n                         this.Dir = 1\r\n                         this.OffsetAngle = this.TempOffsetAngle\r\n                         this.DirTime = undefined\r\n                         this.UpdateTime = 0\r\n                     }\r\n                }\r\n                // if (!this.IsSlow) {\r\n                //     this.IsSlow = true\r\n                //     this.OffsetAngle = -(this.OffsetAngle)\r\n                // }\r\n            }\r\n        }\r\n        // if (this.IsSlow){\r\n        //     //突然旋转的时候突然减速\r\n        //     if (this.QuickStandTime == undefined) {\r\n        //         this.QuickStandTime = this.UnitTools.random(10, 20)\r\n        //     }\r\n        //     this.QuickTime += 1\r\n\r\n        //     if (Math.abs(this.QuickTime) >= this.QuickStandTime) {\r\n        //         if (this.OffsetAngle > 0) {\r\n        //             this.OffsetAngle = this.TempOffsetAngle\r\n        //         } else {\r\n        //             this.OffsetAngle = -this.TempOffsetAngle\r\n        //         }\r\n        //         this.DirTime = undefined\r\n        //         this.UpdateTime = 0\r\n        //         this.QuickTime = 0\r\n        //         this.IsSlow = false\r\n        //         this.QuickStandTime = undefined\r\n        //     }\r\n            \r\n        // }\r\n        \r\n    },\r\n    //更新位置\r\n    update(dt) {\r\n        if (!this.isPause) {\r\n            if (!this.isOver) {\r\n                if (this.IsInit) {\r\n                    this.ChangeRandomDir()\r\n                    this.TrunAngle = this.TrunAngle + this.OffsetAngle //每帧转动\r\n                    this.circle.rotation = this.TrunAngle;\r\n                    this.bulletNode.rotation = this.TrunAngle;\r\n                }\r\n            }\r\n        }\r\n    },\r\n});"]}